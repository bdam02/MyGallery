<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyGallery Premium 5.4 Hearts</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&display=swap" rel="stylesheet">
<style>
*{font-weight:700;box-sizing:border-box;}
body{margin:0;font-family:'Segoe UI',Tahoma,Verdana,sans-serif;display:flex;height:100vh;background:#000;color:#fff;overflow:hidden;position:relative;}
.star{position:absolute;background:white;border-radius:50%;opacity:0.6;animation:twinkle 4s infinite alternate;}
@keyframes twinkle{0%,100%{opacity:0.2}50%{opacity:1}}
#sidebar{width:240px;background:rgba(255,255,255,0.04);padding:20px;display:flex;flex-direction:column;gap:16px;border-right:1px solid rgba(255,255,255,0.1);z-index:2;}
#galleriesList{display:flex;flex-direction:column;gap:12px;overflow-y:auto;max-height:calc(100vh - 120px);padding-right:6px;}
#galleriesList::-webkit-scrollbar{width:6px;}#galleriesList::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);border-radius:3px;}#galleriesList::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.3);border-radius:3px;}
.gallery-item{padding:12px;border-radius:14px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;width:100%;min-height:48px;box-shadow:none;transition:0.25s;position:relative;z-index:1;border: 1px solid rgba(200,200,200,0.3);overflow:visible;word-break:break-word;}
.btnGroup{display:flex;gap:2px;align-items:center;}
.gallery-item button{background:none;border:none;color:white;cursor:pointer;font-size:16px;padding:0;margin:0;position:relative;}
.galleryName{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px;}
.favorite-btn{font-size:16px;color:pink;cursor:pointer;position:relative;}
.favorite-animation{position:absolute;top:-10px;left:50%;transform:translateX(-50%) scale(0);font-size:18px;color:pink;opacity:1;animation:popHeart 0.6s forwards;}
@keyframes popHeart{0%{transform:translateX(-50%) scale(0);opacity:1;}50%{transform:translateX(-50%) scale(1.5);opacity:1;}100%{transform:translateX(-50%) scale(1);opacity:0;}}
#main{flex:1;padding:20px;display:flex;flex-direction:column;position:relative;overflow:hidden;z-index:1;}
#currentGalleryName{font-size:24px;margin-bottom:14px;}
#topControls{display:flex;gap:10px;margin-bottom:20px;align-items:center;}
#searchInput{flex:1;}
#favoritesBtn{font-size:28px;cursor:pointer;color:pink;display:flex;justify-content:center;align-items:center;}
input,button{padding:10px 14px;border-radius:10px;border:none;}
#galleryContainer{display:grid;grid-template-columns:repeat(5,minmax(180px,1fr));gap:48px;overflow-y:auto;max-height:calc(100vh - 180px);padding-right:6px;position:relative;z-index:1;}
.fileCard{position:relative;background:rgba(255,255,255,0.05);border-radius:16px;overflow:hidden;box-shadow:0 0 8px rgba(255,255,255,0.25);transform:translateY(20px);opacity:0;transition:0.4s;z-index:1;}
.fileCard.show{transform:translateY(0);opacity:1;}
.fileCard:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(0,0,0,0.7);}
.fileCard img,.fileCard video,.fileCard audio{width:100%;}
.fileName{text-align:center;padding:6px;}
.actionBtn{position:absolute;top:10px;padding:4px 8px;border-radius:6px;color:white;cursor:pointer;font-size:12px;z-index:10;}
.renameBtn{left:10px;background:#2196F3}
.deleteBtn{right:10px;background:#ff4d4d}
/* MODAL */
#modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;z-index:1000;}
#modal img,#modal video,#modal audio{max-width:90%;max-height:90%;border-radius:16px;}
#closeModal{position:absolute;top:20px;right:30px;font-size:36px;cursor:pointer;z-index:1001;}
/* USERNAME */
#usernameOverlay{position:absolute;inset:0;background:rgba(0,0,0,0.96);display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:2000;}
#usernameOverlay input{font-size:22px;padding:14px 22px;border-radius:14px;background:rgba(255,255,255,0.08);color:#fff;outline:none;border:none;text-align:center;box-shadow:0 0 30px rgba(255,255,255,0.6);}
#usernameDisplay{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Montserrat',sans-serif;font-size:58px;font-weight:300;letter-spacing:2px;color:rgba(255,255,255,0.6);text-shadow:0 0 12px rgba(255,255,255,0.8),0 0 28px rgba(255,255,255,0.6),0 0 44px rgba(255,255,255,0.4);animation:twinkleGlow 4s infinite alternate,float 6s ease-in-out infinite;pointer-events:none;z-index:2001;}
@keyframes float{0%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(4px)}100%{transform:translate(-50%,-50%) translateY(0)}}
@keyframes twinkleGlow{0%,100%{text-shadow:0 0 2px #fff,0 0 6px #fff,0 0 12px #fff;}50%{text-shadow:0 0 8px #fff,0 0 16px #fff,0 0 24px #fff;}}
#changeUsernameBtn{position:absolute;top:20px;right:20px;padding:10px 18px;background:white;color:black;border-radius:14px;cursor:pointer;z-index:2002;}
.colorPicker{position:absolute;display:none;grid-template-columns:repeat(2,20px);gap:6px;padding:6px;background:rgba(0,0,0,0.9);border-radius:12px;box-shadow:0 0 18px rgba(255,255,255,0.4);z-index:999;max-height:180px;overflow-y:auto;}
.colorBox{width:20px;height:20px;border-radius:4px;cursor:pointer;box-shadow:0 0 6px rgba(255,255,255,0.9);}
</style>
</head>
<body>

<div id="sidebar">
  <h3>Galleries</h3>
  <div id="galleriesList"></div>
  <button id="addGalleryBtn">‚ûï</button>
  <div id="galleryCounter">1 / 10</div>
</div>

<div id="main">
  <div id="currentGalleryName">gallery1</div>
  <button id="changeUsernameBtn">Change Username</button>

  <div id="topControls">
    <input type="file" id="fileInput" multiple>
    <button id="uploadBtn">Upload</button>
    <button id="clearBtn">Clear Gallery</button>
    <input type="text" id="searchInput" placeholder="Search...">
    <button id="favoritesBtn">‚ù§Ô∏è</button>
  </div>

  <div id="galleryContainer"></div>
</div>

<div id="modal">
  <span id="closeModal">&times;</span>
  <div id="modalContent"></div>
</div>

<div id="usernameOverlay">
  <h2>Enter your username</h2>
  <input id="usernameInput" placeholder="username">
</div>

<div id="usernameDisplay"></div>

<script>
const MAX_GALLERIES=10;
const colors=["white","red","orange","yellow","green","blue","purple","#ff33cc"];
let galleries=JSON.parse(localStorage.getItem("galleries"))||{gallery1:{files:[],color:"white"}};
let favoritesFiles=JSON.parse(localStorage.getItem("favoritesFiles"))||[];
let currentGallery=Object.keys(galleries)[0];
let username=localStorage.getItem("username")||"";
let openPicker=null;
let searchValue="";

const galleriesList=document.getElementById("galleriesList");
const galleryContainer=document.getElementById("galleryContainer");
const fileInput=document.getElementById("fileInput");
const uploadBtn=document.getElementById("uploadBtn");
const clearBtn=document.getElementById("clearBtn");
const counter=document.getElementById("galleryCounter");
const addGalleryBtn=document.getElementById("addGalleryBtn");
const currentGalleryName=document.getElementById("currentGalleryName");
const usernameOverlay=document.getElementById("usernameOverlay");
const usernameInput=document.getElementById("usernameInput");
const usernameDisplay=document.getElementById("usernameDisplay");
const changeUsernameBtn=document.getElementById("changeUsernameBtn");
const searchInput=document.getElementById("searchInput");
const favoritesBtn=document.getElementById("favoritesBtn");

function save(){
  localStorage.setItem("galleries",JSON.stringify(galleries));
  localStorage.setItem("username",username);
  localStorage.setItem("favoritesFiles",JSON.stringify(favoritesFiles));
}

function renderGalleries(){
  galleriesList.innerHTML="";
  for(const name in galleries){
    const g=galleries[name];
    const div=document.createElement("div");
    div.className="gallery-item";
    div.style.color=g.color;
    const nameDiv=document.createElement("div");
    nameDiv.textContent=name;
    nameDiv.className="galleryName";
    div.appendChild(nameDiv);
    div.onclick=()=>{currentGallery=name;renderFiles();currentGalleryName.textContent=name};
    galleriesList.appendChild(div);
  }
}

function renderFiles(){
  galleryContainer.innerHTML="";
  let files=galleries[currentGallery].files;
  if(searchValue) files = files.filter(f => f.name.toLowerCase().includes(searchValue));
  files.forEach((f,i)=>{
    const c=document.createElement("div");
    c.className="fileCard";
    let isFav=favoritesFiles.includes(f.data);
    c.innerHTML=`
      ${f.type.startsWith("image")?`<img src="${f.data}">`:
      f.type.startsWith("video")?`<video src="${f.data}" controls></video>`:
      f.type.startsWith("audio")?`<audio src="${f.data}" controls></audio>`:
      `<div class="fileName">${f.name}</div>`}
      <div class="fileName">${f.name}</div>
      <button class="actionBtn renameBtn">Rename</button>
      <button class="actionBtn deleteBtn">X</button>
      <button class="favorite-btn fileFav">${isFav?"‚ù§Ô∏è":"ü§ç"}</button>
    `;

    const fileFavBtn = c.querySelector(".fileFav");
    fileFavBtn.style.right="40px";
    fileFavBtn.onclick=e=>{
      e.stopPropagation();
      if(favoritesFiles.includes(f.data)){
        favoritesFiles=favoritesFiles.filter(d=>d!==f.data); fileFavBtn.textContent="ü§ç";
      }else{
        favoritesFiles.push(f.data); fileFavBtn.textContent="‚ù§Ô∏è";
        const anim=document.createElement("span"); anim.className="favorite-animation"; anim.textContent="‚ù§Ô∏è";
        fileFavBtn.appendChild(anim); setTimeout(()=>anim.remove(),600);
      }
      save();
    };

    c.querySelector(".renameBtn").onclick=e=>{
      e.stopPropagation();
      const n=prompt("New name:",f.name);
      if(n){f.name=n;save();renderFiles();}
    };
    c.querySelector(".deleteBtn").onclick=e=>{
      e.stopPropagation();
      galleries[currentGallery].files.splice(i,1);
      favoritesFiles=favoritesFiles.filter(d=>d!==f.data);
      save();renderFiles();
    };
    c.onclick=()=>{document.getElementById("modalContent").innerHTML=
      f.type.startsWith("image")?`<img src="${f.data}">`:
      f.type.startsWith("video")?`<video src="${f.data}" controls autoplay></video>`:
      f.type.startsWith("audio")?`<audio src="${f.data}" controls autoplay></audio>`:
      `<div class="fileName">${f.name}</div>`;document.getElementById("modal").style.display="flex";};

    galleryContainer.appendChild(c);
    setTimeout(()=>c.classList.add("show"),50*i);
  });
}

// Upload
uploadBtn.onclick=()=>{
  const files=fileInput.files;
  if(!files.length) return;
  Array.from(files).forEach(file=>{
    const reader=new FileReader();
    reader.onload=e=>{
      galleries[currentGallery].files.push({name:file.name,type:file.type||"unknown",data:e.target.result});
      save();renderFiles();
    };
    reader.readAsDataURL(file);
  });
  fileInput.value="";
};

// Search & favorites
searchInput.oninput=e=>{searchValue=e.target.value.toLowerCase();renderFiles();};
favoritesBtn.onclick=()=>{
  searchValue="";
  let favFiles=[];
  for(const g in galleries){
    galleries[g].files.forEach(f=>{
      if(favoritesFiles.includes(f.data)) favFiles.push(f);
    });
  }
  galleryContainer.innerHTML="";
  favFiles.forEach((f,i)=>{
    const c=document.createElement("div");
    c.className="fileCard";
    c.innerHTML=`
      ${f.type.startsWith("image")?`<img src="${f.data}">`:
      f.type.startsWith("video")?`<video src="${f.data}" controls></video>`:
      f.type.startsWith("audio")?`<audio src="${f.data}" controls></audio>`:
      `<div class="fileName">${f.name}</div>`}
      <div class="fileName">${f.name}</div>
    `;
    c.onclick=()=>{document.getElementById("modalContent").innerHTML=
      f.type.startsWith("image")?`<img src="${f.data}">`:
      f.type.startsWith("video")?`<video src="${f.data}" controls autoplay></video>`:
      f.type.startsWith("audio")?`<audio src="${f.data}" controls autoplay></audio>`:
      `<div class="fileName">${f.name}</div>`;document.getElementById("modal").style.display="flex";};
    galleryContainer.appendChild(c);
    setTimeout(()=>c.classList.add("show"),50*i);
  });
};

// Galleries
renderGalleries(); renderFiles();

// Modal
const modal=document.getElementById("modal");
const closeModal=document.getElementById("closeModal");
closeModal.onclick=()=>{modal.style.display="none";};
modal.onclick=e=>{if(e.target===modal||e.target===closeModal)modal.style.display="none";};
</script>
</body>
</html>









