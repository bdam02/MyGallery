<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyGallery Premium 3.4</title>

<style>
:root{
  --bg-light:#f0f4f8;
  --bg-dark:#000;
}

/* ===== BODY ===== */
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  display:flex;
  height:100vh;
  transition:.4s;
}
body.dark{
  background:black;
  color:white;
  overflow:hidden;
}
body.light{
  background:var(--bg-light);
  color:#333;
}

/* ===== STARS ===== */
.star{
  position:absolute;
  background:white;
  border-radius:50%;
  opacity:.6;
  animation:twinkle 4s infinite alternate;
}
@keyframes twinkle{
  0%,100%{opacity:.2}
  50%{opacity:1}
}

/* ===== LIGHT BACKGROUNDS ===== */
body.light.bg-gradient{
  background:linear-gradient(135deg,#e3f2fd,#fce4ec);
}
body.light.bg-dots{
  background:
    radial-gradient(#ccc 1px,transparent 1px);
  background-size:20px 20px;
}

/* ===== SIDEBAR ===== */
#sidebar{
  width:240px;
  padding:20px;
  background:rgba(255,255,255,.05);
}
body.light #sidebar{background:#fff}

.gallery-item{
  font-weight:bold;
  padding:8px 10px;
  border-radius:8px;
  margin-bottom:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}
.btnGroup{display:flex;gap:6px;position:relative}
.btnGroup button{
  background:none;
  border:none;
  cursor:pointer;
}

/* ===== COLOR PALETTE ===== */
.palette{
  position:absolute;
  top:24px;
  right:0;
  display:grid;
  grid-template-columns:repeat(4,14px);
  gap:6px;
  padding:6px;
  background:#111;
  border-radius:8px;
}
.palette div{
  width:14px;
  height:14px;
  border-radius:4px;
  cursor:pointer;
}

/* ===== MAIN ===== */
#main{flex:1;padding:20px}
#topControls{display:flex;gap:10px;flex-wrap:wrap}

/* ===== FILES ===== */
#galleryContainer{
  margin-top:20px;
  display:grid;
  grid-template-columns:repeat(auto-fill,180px);
  gap:20px;
}
.fileCard{
  background:rgba(255,255,255,.08);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 0 10px rgba(255,255,255,.2);
}
.fileCard img,.fileCard video{width:100%}
.fileName{text-align:center;padding:6px}
.actionBtn{
  position:absolute;
  top:10px;
  padding:4px 6px;
  font-size:12px;
}
.renameBtn{left:10px}
.deleteBtn{right:10px}

/* ===== MODE BTN ===== */
.modeBtn{
  width:36px;
  height:36px;
  font-size:18px;
}
</style>
</head>

<body class="dark">

<div id="sidebar">
  <h3>Galleries</h3>
  <div id="galleriesList"></div>
  <button id="addGalleryBtn">‚ûï</button>
  <button id="toggleMode" class="modeBtn">‚òÄÔ∏è</button>
  <button id="bgBtn" style="display:none">üé® Background</button>
</div>

<div id="main">
  <div id="topControls">
    <input type="file" id="fileInput" multiple>
    <button id="uploadBtn">Upload</button>
    <button id="clearBtn">Clear Gallery</button>
    <input type="text" id="searchInput" placeholder="Rechercher...">
  </div>
  <div id="galleryContainer"></div>
</div>

<script>
let state=JSON.parse(localStorage.getItem("galleryState"))||{
  mode:"dark",
  bg:"default",
  galleries:{gallery1:{color:"#fff",files:[]}},
  current:"gallery1"
};

const colors=[
  "#000","#f44336","#ff9800","#ffeb3b",
  "#4caf50","#2196f3","#9c27b0","#e91e63"
];

function save(){localStorage.setItem("galleryState",JSON.stringify(state));}

/* ===== STARS ===== */
function stars(){
  document.querySelectorAll(".star").forEach(s=>s.remove());
  if(state.mode!=="dark") return;
  for(let i=0;i<150;i++){
    let s=document.createElement("div");
    s.className="star";
    s.style.top=Math.random()*100+"%";
    s.style.left=Math.random()*100+"%";
    let z=Math.random()*2+1;
    s.style.width=z+"px";
    s.style.height=z+"px";
    document.body.appendChild(s);
  }
}

/* ===== GALLERIES ===== */
function renderGalleries(){
  galleriesList.innerHTML="";
  for(let g in state.galleries){
    let div=document.createElement("div");
    div.className="gallery-item";
    div.style.color=state.galleries[g].color;
    div.innerHTML=`<span>${g}</span>`;

    let grp=document.createElement("div");
    grp.className="btnGroup";

    let rename=document.createElement("button");
    rename.textContent="‚úèÔ∏è";
    rename.onclick=e=>{
      e.stopPropagation();
      let n=prompt("Rename gallery",g);
      if(n&&!state.galleries[n]){
        state.galleries[n]=state.galleries[g];
        delete state.galleries[g];
        state.current=n;
        save();renderGalleries();renderFiles();
      }
    };

    let color=document.createElement("button");
    color.textContent="üé®";
    color.onclick=e=>{
      e.stopPropagation();
      let pal=document.createElement("div");
      pal.className="palette";
      colors.forEach(c=>{
        let d=document.createElement("div");
        d.style.background=c;
        d.onclick=()=>{
          state.galleries[g].color=c;
          save();renderGalleries();
        };
        pal.appendChild(d);
      });
      grp.appendChild(pal);
    };

    grp.append(rename,color);
    div.appendChild(grp);
    div.onclick=()=>{state.current=g;renderFiles()};
    galleriesList.appendChild(div);
  }
}

/* ===== FILES ===== */
function renderFiles(){
  galleryContainer.innerHTML="";
  state.galleries[state.current].files.forEach((f,i)=>{
    let c=document.createElement("div");
    c.className="fileCard";
    c.innerHTML=`
      ${f.type.startsWith("image")?`<img src="${f.data}">`:`<video src="${f.data}" controls></video>`}
      <div class="fileName">${f.name}</div>
      <button class="actionBtn renameBtn" onclick="renameFile(${i})">Rename</button>
      <button class="actionBtn deleteBtn" onclick="deleteFile(${i})">X</button>
    `;
    galleryContainer.appendChild(c);
  });
}

function upload(){
  [...fileInput.files].forEach(file=>{
    let r=new FileReader();
    r.onload=e=>{
      state.galleries[state.current].files.push({name:file.name,type:file.type,data:e.target.result});
      save();renderFiles();
    };
    r.readAsDataURL(file);
  });
}

function renameFile(i){
  let n=prompt("New name",state.galleries[state.current].files[i].name);
  if(n){state.galleries[state.current].files[i].name=n;save();renderFiles();}
}
function deleteFile(i){
  state.galleries[state.current].files.splice(i,1);save();renderFiles();
}

/* ===== MODE ===== */
toggleMode.onclick=()=>{
  state.mode=state.mode==="dark"?"light":"dark";
  document.body.className=state.mode;
  bgBtn.style.display=state.mode==="light"?"block":"none";
  save();stars();
};

bgBtn.onclick=()=>{
  state.bg=state.bg==="gradient"?"dots":state.bg==="dots"?"default":"gradient";
  document.body.classList.remove("bg-gradient","bg-dots");
  if(state.bg==="gradient")document.body.classList.add("bg-gradient");
  if(state.bg==="dots")document.body.classList.add("bg-dots");
  save();
};

/* INIT */
document.body.className=state.mode;
bgBtn.style.display=state.mode==="light"?"block":"none";
if(state.bg==="gradient")document.body.classList.add("bg-gradient");
if(state.bg==="dots")document.body.classList.add("bg-dots");

stars();
renderGalleries();
renderFiles();
</script>
</body>
</html>




















