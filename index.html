<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyGallery Premium 3.4</title>

<style>
:root{
  --rename-btn:#2196F3;
  --delete-btn:#ff4d4d;
}

/* ===== BODY DARK ONLY ===== */
body{
  margin:0;
  font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
  display:flex;
  height:100vh;
  background:#000;
  color:#fff;
  overflow:hidden;
  position:relative;
}

/* ===== STARS ===== */
.star{
  position:absolute;
  border-radius:50%;
  background:white;
  opacity:0.6;
  animation:twinkle 4s infinite alternate ease-in-out;
}
@keyframes twinkle{
  0%,100%{opacity:0.2;}
  50%{opacity:1;}
}

/* ===== SIDEBAR ===== */
#sidebar{
  width:240px;
  background:rgba(255,255,255,0.05);
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:10px;
  border-right:1px solid rgba(255,255,255,0.1);
}

.gallery-item{
  padding:8px 10px;
  border-radius:8px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:bold;
  transition:0.3s;
  box-shadow:0 0 4px rgba(255,255,255,0.25);
}
.gallery-item:hover{
  transform:scale(1.03);
  box-shadow:0 0 10px rgba(255,255,255,0.6);
}
.gallery-item.active{
  box-shadow:0 0 15px currentColor;
}

.btnGroup{
  display:flex;
  gap:6px;
  align-items:center;
}

.gallery-item button{
  background:none;
  border:none;
  cursor:pointer;
  font-size:14px;
  color:white;
}

/* ===== COLOR PICKER ===== */
.colorPicker{
  display:flex;
  gap:4px;
}
.colorBox{
  width:14px;
  height:14px;
  border-radius:3px;
  cursor:pointer;
  box-shadow:0 0 4px rgba(255,255,255,0.6);
}

/* ===== MAIN ===== */
#main{
  flex:1;
  padding:20px;
  display:flex;
  flex-direction:column;
}

#topControls{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:20px;
}

button,input{
  padding:10px 14px;
  border-radius:10px;
  border:none;
}

/* ===== GALLERY ===== */
#galleryContainer{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:20px;
}

.fileCard{
  position:relative;
  border-radius:16px;
  overflow:hidden;
  background:rgba(255,255,255,0.05);
  box-shadow:0 0 6px rgba(255,255,255,0.3);
  transition:0.4s;
  opacity:0;
  transform:translateY(20px);
}
.fileCard.show{
  opacity:1;
  transform:translateY(0);
}
.fileCard:hover{
  transform:translateY(-5px);
  box-shadow:0 15px 30px rgba(0,0,0,0.6);
}

.fileCard img,.fileCard video{
  width:100%;
}

.fileName{
  text-align:center;
  padding:6px;
  font-weight:500;
}

.actionBtn{
  position:absolute;
  top:10px;
  padding:4px 8px;
  font-size:12px;
  border:none;
  cursor:pointer;
  border-radius:6px;
}

.renameBtn{
  left:10px;
  background:var(--rename-btn);
  color:white;
}

.deleteBtn{
  right:10px;
  background:var(--delete-btn);
  color:white;
}

/* ===== MODAL ===== */
#modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  justify-content:center;
  align-items:center;
}
#modal img,#modal video{
  max-width:90%;
  max-height:90%;
  border-radius:16px;
}
#closeModal{
  position:absolute;
  top:20px;
  right:30px;
  font-size:36px;
  cursor:pointer;
}
</style>
</head>

<body class="dark">

<div id="sidebar">
  <h3>Galleries</h3>
  <div id="galleriesList"></div>
  <button id="addGalleryBtn">➕</button>
</div>

<div id="main">
  <div id="topControls">
    <input type="file" id="fileInput" multiple>
    <button id="uploadBtn">Upload</button>
    <button id="clearBtn">Clear Gallery</button>
    <input type="text" id="searchInput" placeholder="Rechercher un fichier...">
  </div>
  <div id="galleryContainer"></div>
</div>

<div id="modal">
  <span id="closeModal">&times;</span>
  <div id="modalContent"></div>
</div>

<script>
let galleries = JSON.parse(localStorage.getItem("galleries")) || { gallery1:{files:[],color:"white"} };
let currentGallery="gallery1";

const colors=[
  "red","orange","yellow","green","blue","purple","pink"
];

function save(){localStorage.setItem("galleries",JSON.stringify(galleries));}

function renderGalleries(){
  galleriesList.innerHTML="";
  for(const name in galleries){
    const g=galleries[name];
    const div=document.createElement("div");
    div.className="gallery-item"+(name===currentGallery?" active":"");
    div.style.color=g.color;
    div.textContent=name;

    const btnGroup=document.createElement("div");
    btnGroup.className="btnGroup";

    const rename=document.createElement("button");
    rename.textContent="✏️";
    rename.onclick=e=>{
      e.stopPropagation();
      const n=prompt("Nouveau nom:",name);
      if(n&&!galleries[n]){
        galleries[n]=galleries[name];
        delete galleries[name];
        currentGallery=n;
        save();renderGalleries();renderFiles();
      }
    };

    const palette=document.createElement("div");
    palette.className="colorPicker";
    colors.forEach(c=>{
      const box=document.createElement("div");
      box.className="colorBox";
      box.style.background=c;
      box.onclick=e=>{
        e.stopPropagation();
        g.color=c;
        save();renderGalleries();
      };
      palette.appendChild(box);
    });

    btnGroup.append(rename,palette);
    div.appendChild(btnGroup);
    div.onclick=()=>{currentGallery=name;renderGalleries();renderFiles();};
    galleriesList.appendChild(div);
  }
}

function renderFiles(){
  galleryContainer.innerHTML="";
  galleries[currentGallery].files.forEach((f,i)=>{
    const c=document.createElement("div");
    c.className="fileCard";
    let html="";
    if(f.type.startsWith("image")) html=`<img src="${f.data}">`;
    else if(f.type.startsWith("video")) html=`<video src="${f.data}" controls></video>`;
    html+=`<div class="fileName">${f.name}</div>
    <button class="actionBtn renameBtn">Rename</button>
    <button class="actionBtn deleteBtn">X</button>`;
    c.innerHTML=html;

    c.querySelector(".renameBtn").onclick=e=>{
      e.stopPropagation();
      const n=prompt("Nouveau nom:",f.name);
      if(n){f.name=n;save();renderFiles();}
    };
    c.querySelector(".deleteBtn").onclick=e=>{
      e.stopPropagation();
      galleries[currentGallery].files.splice(i,1);
      save();renderFiles();
    };

    c.onclick=()=>{
      modalContent.innerHTML="";
      if(f.type.startsWith("image")) modalContent.innerHTML=`<img src="${f.data}">`;
      else modalContent.innerHTML=`<video src="${f.data}" controls autoplay></video>`;
      modal.style.display="flex";
    };

    galleryContainer.appendChild(c);
    setTimeout(()=>c.classList.add("show"),50*i);
  });
}

uploadBtn.onclick=()=>{
  [...fileInput.files].forEach(file=>{
    const r=new FileReader();
    r.onload=e=>{
      galleries[currentGallery].files.push({name:file.name,type:file.type,data:e.target.result});
      save();renderFiles();
    };
    r.readAsDataURL(file);
  });
};

clearBtn.onclick=()=>{
  if(confirm("Supprimer toute la gallery ?")){
    galleries[currentGallery].files=[];
    save();renderFiles();
  }
};

searchInput.oninput=()=>{
  const q=searchInput.value.toLowerCase();
  document.querySelectorAll(".fileCard").forEach(c=>{
    c.style.display=c.innerText.toLowerCase().includes(q)?"block":"none";
  });
};

addGalleryBtn.onclick=()=>{
  const n=prompt("Nom de la nouvelle gallery:");
  if(n&&!galleries[n]){
    galleries[n]={files:[],color:"white"};
    save();renderGalleries();
  }
};

closeModal.onclick=()=>modal.style.display="none";
modal.onclick=e=>{if(e.target===modal)modal.style.display="none";};

function stars(){
  for(let i=0;i<200;i++){
    const s=document.createElement("div");
    s.className="star";
    s.style.top=Math.random()*100+"%";
    s.style.left=Math.random()*100+"%";
    s.style.width=s.style.height=(Math.random()*2+1)+"px";
    document.body.appendChild(s);
  }
}

stars();
renderGalleries();
renderFiles();
</script>
</body>
</html>






















