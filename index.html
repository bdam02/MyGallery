<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyGallery Premium</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#4CAF50;
  --rename:#2196F3;
  --delete:#ff4d4d;
}

body{
  margin:0;
  font-family:'Inter','Segoe UI',sans-serif;
  background:#000;
  color:#fff;
  display:flex;
  height:100vh;
  overflow:hidden;
}

/* ===== STARS ===== */
.star{
  position:absolute;
  background:white;
  border-radius:50%;
  opacity:0.6;
  animation:twinkle 4s infinite alternate;
}
@keyframes twinkle{
  0%{opacity:0.2}
  100%{opacity:1}
}

/* ===== USERNAME DISPLAY ===== */
#usernameDisplay{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:64px;
  font-weight:300;
  letter-spacing:1.5px;
  opacity:0.65;
  pointer-events:none;
  color:#fff;
  text-shadow:
    0 0 12px rgba(255,255,255,0.45),
    0 0 28px rgba(100,255,180,0.35),
    0 0 55px rgba(100,255,180,0.25);
  animation:usernameFloat 6s ease-in-out infinite;
}
@keyframes usernameFloat{
  0%{transform:translate(-50%,-50%) translateY(0)}
  50%{transform:translate(-50%,-50%) translateY(-6px)}
  100%{transform:translate(-50%,-50%) translateY(0)}
}

/* ===== SIDEBAR ===== */
#sidebar{
  width:250px;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:14px;
  background:rgba(255,255,255,0.04);
  border-right:1px solid rgba(255,255,255,0.1);
}

.gallery-item{
  padding:10px;
  border-radius:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  font-weight:bold;
  box-shadow:0 0 14px currentColor;
  transition:0.25s;
}
.gallery-item:hover{
  transform:scale(1.04);
  box-shadow:0 0 22px currentColor;
}
.gallery-item.active{
  outline:2px solid var(--accent);
}

.btnGroup{
  display:flex;
  gap:4px;
}

.btnGroup button{
  width:22px;
  height:22px;
  border:none;
  background:none;
  color:white;
  cursor:pointer;
}

#galleryCount{
  text-align:center;
  opacity:0.6;
  font-size:13px;
}

/* ===== MAIN ===== */
#main{
  flex:1;
  padding:20px;
  display:flex;
  flex-direction:column;
}

#currentGalleryTitle{
  font-size:20px;
  margin-bottom:10px;
  opacity:0.9;
}

#topControls{
  display:flex;
  gap:10px;
  margin-bottom:20px;
}

button,input{
  padding:10px 14px;
  border-radius:10px;
  border:none;
}

#galleryContainer{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:20px;
}

/* ===== FILE CARD ===== */
.fileCard{
  background:rgba(255,255,255,0.05);
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  box-shadow:0 0 10px rgba(255,255,255,0.15);
  opacity:0;
  transform:translateY(20px);
  transition:0.4s;
}
.fileCard.show{
  opacity:1;
  transform:translateY(0);
}
.fileCard img,video{
  width:100%;
}
.fileName{
  padding:8px;
  text-align:center;
}

.actionBtn{
  position:absolute;
  top:10px;
  padding:4px 8px;
  border-radius:6px;
  border:none;
  cursor:pointer;
}
.renameBtn{left:10px;background:var(--rename)}
.deleteBtn{right:10px;background:var(--delete)}

/* ===== COLOR PICKER ===== */
.colorPicker{
  position:absolute;
  display:none;
  grid-template-columns:repeat(3,18px);
  gap:6px;
  padding:8px;
  background:rgba(0,0,0,0.85);
  border-radius:10px;
  z-index:999;
}
.colorBox{
  width:18px;
  height:18px;
  border-radius:4px;
  cursor:pointer;
}

/* ===== USERNAME MODAL ===== */
#usernameModal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2000;
}
#usernameBox{
  background:#111;
  padding:30px;
  border-radius:14px;
  text-align:center;
  box-shadow:0 0 30px rgba(255,255,255,0.2);
}
#usernameBox input{
  width:240px;
  margin-top:10px;
}
</style>
</head>

<body>

<div id="usernameDisplay"></div>

<div id="usernameModal">
  <div id="usernameBox">
    <h2>Choose your username</h2>
    <input id="usernameInput" placeholder="Username">
    <br><br>
    <button onclick="saveUsername()">Confirm</button>
  </div>
</div>

<div id="sidebar">
  <h3>Galleries</h3>
  <div id="galleriesList"></div>
  <button id="addGalleryBtn">âž•</button>
  <div id="galleryCount"></div>
</div>

<div id="main">
  <div id="currentGalleryTitle"></div>
  <div id="topControls">
    <input type="file" id="fileInput" multiple>
    <button id="uploadBtn">Upload</button>
    <button id="clearBtn">Clear</button>
    <input id="searchInput" placeholder="Search...">
    <button onclick="changeUsername()">Change username</button>
  </div>
  <div id="galleryContainer"></div>
</div>

<script>
/* ===== USERNAME ===== */
let username=localStorage.getItem("username");
const usernameDisplay=document.getElementById("usernameDisplay");
const usernameModal=document.getElementById("usernameModal");

function saveUsername(){
  const v=document.getElementById("usernameInput").value.trim();
  if(!v)return;
  username=v;
  localStorage.setItem("username",v);
  usernameDisplay.textContent=v;
  usernameModal.style.display="none";
}
function changeUsername(){
  usernameModal.style.display="flex";
}
if(username){
  usernameDisplay.textContent=username;
  usernameModal.style.display="none";
}

/* ===== STARS ===== */
for(let i=0;i<200;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.top=Math.random()*100+"%";
  s.style.left=Math.random()*100+"%";
  s.style.width=s.style.height=(Math.random()*2+1)+"px";
  document.body.appendChild(s);
}

/* ===== GALLERIES ===== */
const maxGalleries=10;
let galleries=JSON.parse(localStorage.getItem("galleries"))||{gallery1:[]};
let currentGallery="gallery1";
const colors=["white","red","orange","yellow","green","blue","purple","hotpink"];

function save(){localStorage.setItem("galleries",JSON.stringify(galleries))}

function renderGalleries(){
  galleriesList.innerHTML="";
  const keys=Object.keys(galleries);
  galleryCount.textContent=`${keys.length}/${maxGalleries}`;

  addGalleryBtn.style.display=keys.length>=maxGalleries?"none":"block";

  keys.forEach(name=>{
    const g=galleries[name];
    const div=document.createElement("div");
    div.className="gallery-item";
    if(name===currentGallery)div.classList.add("active");
    div.style.color=g.color||"white";
    div.textContent=name;

    const btns=document.createElement("div");
    btns.className="btnGroup";

    const pen=document.createElement("button");
    pen.textContent="âœï¸";
    pen.onclick=e=>{
      e.stopPropagation();
      const n=prompt("New name",name);
      if(n&&!galleries[n]){
        galleries[n]=galleries[name];
        delete galleries[name];
        currentGallery=n;
        save();render();
      }
    };

    const pal=document.createElement("button");
    pal.textContent="ðŸŽ¨";

    const picker=document.createElement("div");
    picker.className="colorPicker";
    colors.forEach(c=>{
      const b=document.createElement("div");
      b.className="colorBox";
      b.style.background=c;
      b.onclick=e=>{
        e.stopPropagation();
        g.color=c;
        save();
        picker.style.display="none";
        renderGalleries();
      };
      picker.appendChild(b);
    });

    pal.onclick=e=>{
      e.stopPropagation();
      picker.style.display=picker.style.display==="grid"?"none":"grid";
      const r=div.getBoundingClientRect();
      picker.style.top=r.top+"px";
      picker.style.left=(r.right+12)+"px";
    };

    const del=document.createElement("button");
    del.textContent="ðŸ—‘ï¸";
    del.onclick=e=>{
      e.stopPropagation();
      if(confirm("Delete gallery?")){
        delete galleries[name];
        currentGallery=Object.keys(galleries)[0];
        save();render();
      }
    };

    btns.append(pen,pal,del);
    div.appendChild(btns);
    document.body.appendChild(picker);

    div.onclick=()=>{
      currentGallery=name;
      render();
    };

    galleriesList.appendChild(div);
  });
}

function renderFiles(){
  galleryContainer.innerHTML="";
  currentGalleryTitle.textContent=currentGallery;
  (galleries[currentGallery]||[]).forEach((f,i)=>{
    const c=document.createElement("div");
    c.className="fileCard";
    let h=f.type.startsWith("image")?`<img src="${f.data}">`:`<video src="${f.data}" controls></video>`;
    h+=`<div class="fileName">${f.name}</div>`;
    h+=`<button class="actionBtn renameBtn">Rename</button>`;
    h+=`<button class="actionBtn deleteBtn">X</button>`;
    c.innerHTML=h;

    c.querySelector(".renameBtn").onclick=()=>{
      const n=prompt("New name",f.name);
      if(n){f.name=n;save();renderFiles();}
    };
    c.querySelector(".deleteBtn").onclick=e=>{
      e.stopPropagation();
      galleries[currentGallery].splice(i,1);
      save();renderFiles();
    };

    galleryContainer.appendChild(c);
    setTimeout(()=>c.classList.add("show"),50*i);
  });
}

function render(){
  renderGalleries();
  renderFiles();
}

uploadBtn.onclick=()=>{
  [...fileInput.files].forEach(f=>{
    const r=new FileReader();
    r.onload=e=>{
      galleries[currentGallery].push({name:f.name,type:f.type,data:e.target.result});
      save();renderFiles();
    };
    r.readAsDataURL(f);
  });
  fileInput.value="";
};

clearBtn.onclick=()=>{
  if(confirm("Clear gallery?")){
    galleries[currentGallery]=[];
    save();renderFiles();
  }
};

searchInput.oninput=()=>{
  const q=searchInput.value.toLowerCase();
  document.querySelectorAll(".fileCard").forEach(c=>{
    c.style.display=c.textContent.toLowerCase().includes(q)?"block":"none";
  });
};

addGalleryBtn.onclick=()=>{
  const n="gallery"+(Object.keys(galleries).length+1);
  if(Object.keys(galleries).length<maxGalleries){
    galleries[n]=[];
    save();render();
  }
};

render();
</script>
</body>
</html>






